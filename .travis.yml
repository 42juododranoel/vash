language: bash

before_install:
- export HOST_USER_ID=`id -g`
- export PARENT_DIRECTORY=/home/travis/build/vsevolod-skripnik
- export ROOT_DIRECTORY=${TRAVIS_BUILD_DIR}
- export MEDIA_DIRECTORY=${TRAVIS_BUILD_DIR}/resources/media
- export STATIC_DIRECTORY=${TRAVIS_BUILD_DIR}/resources/static
- export CERTBOT_DIRECTORY=${TRAVIS_BUILD_DIR}/resources/certbot

- >
  docker-compose \
    -f compose/postgres.yml \
    -f compose/django.yml \
    --project-directory . \
    build

addons:
  apt:
    packages:
    - sshpass
